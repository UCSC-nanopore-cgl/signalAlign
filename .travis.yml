python:
- 3.5
notifications:
  slack:
    secure: Ni283faKj3DjyVBykmulN92K/K2kmKJTHp2q57bq0St1dWX5HECNRZs1bCoyS5oFwYnD5oQVHOnvEDJkWiJNz4vIDSbAJzMZ16Vyi1OvLLW2rTFZ4d0Js2lMJYOGPuxSzMZznA6spOjmS52xvMGtZC4DZxrjY24lOHTY8sCKs48S9nw1800AtJjY5zCIlAxx63N7LVtZzH2QuSsCXgO3oV0d2CulNpsYLjeIxJfNCZRSU0K2RrThvHvnZpXQypC++hEAT7KC0tKBxGAHpQoumI3X3lmiFeMlSSRb+YJ2dTWsZbR/PcS1poM8YFi7oczvwhAuqXuejEsksxUdT3gyoiq40alKZ+F23UKXOZ91W5nCQkRUb7OK5OWaJfqZGZttuNnj0KlmhAVcuHH8vnSEWrFv6zPhtzqTZZvpJg5OkWYEjOcN6cVVOnPtqCGTbt5IkXZFZJryH9d661S8qjxh7tQPfxstwAq7MjOITPHVcFvNfjv3Rz96QVdMm6oN8CaZjNqRHDLHPSIUD3ydVRGXPaWafoZjkYb4AALctdc8Wk+Jfarz8nMV/7d9OYhsIOA+kqbR7cGoHBXLspPeAaMGsjmvCvrUf5kYH322lWTc2y3+f8h4IXkHdXcsU/qz3fYbpf7BS9FySBRNVV2b9JLNnNbLhURuRCJQk7wNmOtbYn4=
  email: false
os:
- linux
dist: trusty
git:
  submodules: true
before_install:
- git submodule update --init
- |-
  if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew update; brew install gcc@5 automake make open-mpi; gcc --version; alias make='gmake'; ln -s /usr/local/bin/gcc-5 /usr/local/bin/gcc; alias gcc='gcc-5'; alias g++='g++-5';
  gcc --version;
  else
  sudo apt-get update -qq; sudo apt-get install autotools-dev autoconf cmake wget git make g++-5 gcc-5 zlib1g-dev libbz2-dev liblzma-dev; sudo apt-get update;
  fi
install:
- pwd
- echo $HOME
- ls
- cd $HOME/build/UCSC-nanopore-cgl/
- wget https://github.com/samtools/samtools/releases/download/1.9/samtools-1.9.tar.bz2
- tar -vxjf samtools-1.9.tar.bz2
- ls
- cd samtools-1.9
- "./configure --prefix=$HOME/build/UCSC-nanopore-cgl/"
- make
- make install
- echo "PATH=$HOME/build/UCSC-nanopore-cgl/bin/:$PATH" >> ~/.bashrc
- source ~/.bashrc
- cd ..
- which samtools
- git clone https://github.com/lh3/bwa.git
- cd bwa
- make
- echo "PATH=$HOME/build/UCSC-nanopore-cgl/bwa/:$PATH" >> ~/.bashrc
- cd ..
- source ~/.bashrc
- which bwa
- wget https://www.python.org/ftp/python/3.6.8/Python-3.6.8.tgz
- tar -xzf Python-3.6.8.tgz
- find $HOME/build/UCSC-nanopore-cgl/  -type d | xargs chmod 0755
- cd Python-3.6.8/
- "./configure --prefix=$HOME/"
- make
- make install
- echo "PATH=$HOME/build/UCSC-nanopore-cgl/Python-3.6.8/:$PATH" >> ~/.bashrc
- source ~/.bashrc
- which python
- which python3
- alias python="$HOME/build/UCSC-nanopore-cgl/Python-3.6.8/python"
- which python3
- cd ..
- wget https://bootstrap.pypa.io/get-pip.py
- python3 get-pip.py --user
- echo "PATH=$HOME/.local/bin/:$PATH" >> ~/.bashrc
- source ~/.bashrc
- which pip3
- which pip
- alias gcc=gcc-5
- alias g++=g++-5
- alias python="$HOME/build/UCSC-nanopore-cgl/Python-3.6.8/python"
- gcc --version
- pip3 install numpy
- pip3 install setuptools
- pip3 install pysam
- pip3 install Cython
- cd $HOME/build/UCSC-nanopore-cgl/signalAlign
- make
- python3 setup.py install
before_script:
- export DISPLAY=:99.0
- sh -e /etc/init.d/xvfb start
- sleep 3
script:
- export PATH=$PATH:$PWD/bin
- make test
